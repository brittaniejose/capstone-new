"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[923],{4624:function(e,n,r){r.r(n),r.d(n,{default:function(){return i}});var t=r(1699),u=r(7294),a=r(7202),l=r(8705),o=r(9590);r(3591);var c=["id","name","value","onFileSelect","onChange","onDialogOpen","onDialogClose","onTabChange","apiRef","customTabs","validators","tabsCss","locale","localeTranslations","localePluralize","previewUrlCallback","metadataCallback"],i=function(e){var n,r,i,f,s,d,C,p,v,E,g,A,L,b,m,O,h,w,R,D,U,k,P,T,_,I,S,y,N,z,j,x=(r=a,i=(n=e).id,f=n.name,s=n.value,d=n.onFileSelect,C=n.onChange,p=n.onDialogOpen,v=n.onDialogClose,E=n.onTabChange,g=n.apiRef,A=n.customTabs,L=n.validators,b=n.tabsCss,m=n.locale,O=n.localeTranslations,h=n.localePluralize,w=n.previewUrlCallback,R=n.metadataCallback,D=(0,t._)(n,c),U=(0,u.useRef)(null),k=(0,u.useRef)(null),P=(0,u.useRef)(null),T=(0,l.u)(d),_=(0,l.u)(C),I=(0,l.u)(p),S=(0,l.u)(v),y=(0,l.u)(E),N=(0,l.u)(R),z=(0,l.u)(w||l.d),j=function(e,n){var r=!0,t=(0,u.useRef)();t.current?r=!!(n&&t.current.deps&&o(n,t.current.deps)):t.current={deps:n,result:e()};var a=r?t.current:{deps:n,result:e()};return t.current=a,a.result}((function(){return D}),[D]),(0,l.a)(A,r),(0,l.b)((function(){return m&&(window.UPLOADCARE_LOCALE=m),h&&(window.UPLOADCARE_LOCALE_PLURALIZE=h),O&&(window.UPLOADCARE_LOCALE_TRANSLATIONS=O),r.plugin((function(e){e.locale.rebuild({locale:m||null,localeTranslations:O||null,localePluralize:h||null})})),function(){m&&delete window.UPLOADCARE_LOCALE,h&&delete window.UPLOADCARE_LOCALE_PLURALIZE,O&&delete window.UPLOADCARE_LOCALE_TRANSLATIONS}}),[m,O,h]),(0,u.useEffect)((function(){var e=U.current;k.current=r.Widget(e,(0,t.a)((0,t.a)({},j),{},{metadataCallback:j.metadata?void 0:N,previewUrlCallback:z}));var n=e.nextSibling;return P.current&&k.current.value(P.current),function(){r.jQuery(e).removeData("uploadcareWidget"),n&&n.remove()}}),[r,j,N,z]),function(e,n){(0,u.useEffect)((function(){if(null!=n){var r=e.current;return n.forEach((function(e){r.validators.push(e)})),function(){r.validators.length=0}}}),[e,n])}(k,L),(0,u.useEffect)((function(){return k.current.onUploadComplete.add(_),k.current.onChange.add(T),function(){k.current.onUploadComplete.remove(_),k.current.onChange.remove(T)}}),[_,T,r,j]),(0,u.useEffect)((function(){var e,n=function(n){(e=n).done(S).fail(S).progress(y),I(n)};return k.current.onDialogOpen.add(n),function(){k.current.onDialogOpen.remove(n),e&&e.reject()}}),[S,I,y,j]),(0,u.useEffect)((function(){var e=[],n=function(n){e=n?n.files?n.files():[n]:[]};return k.current.onChange.add(n),function(){e.forEach((function(e){return e.cancel()})),k.current.onChange.remove(n)}}),[j]),(0,u.useEffect)((function(){P.current!==s&&k.current.value(s),P.current=s}),[s]),(0,u.useEffect)((function(){r&&b&&"string"==typeof b&&(0===b.indexOf("https://")?r.tabsCss.addUrl(b):r.tabsCss.addStyle(b))}),[r,b]),(0,u.useImperativeHandle)(g,(function(){return{openDialog:function(){return k.current.openDialog()},reloadInfo:function(){return k.current.reloadInfo()},getInput:function(){return k.current.inputElement},value:function(e){return k.current.value(e)}}}),[]),(0,u.useCallback)((function(){return u.createElement("input",{type:"hidden",ref:U,id:i,name:f})}),[i,f]));return u.createElement(x,null)}}}]);